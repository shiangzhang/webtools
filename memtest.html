<!DOCTYPE html>
<html>
  <head>
    <title>内存占用测试</title>
    <script type="text/javascript">
      const mem = new Array();

      function showMemInfo() {
        document.getElementById("mem").innerHTML =
          "JS分配内存：" +
          mem.length * 100 +
          "M,总占用:" +
          (window.performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2) +
          "M";
      }
      function addMem() {
        mem.push(new Uint8Array(1024 * 1024 * 100).fill(1));
        showMemInfo();
      }

      document.addEventListener("DOMContentLoaded", () => {
        console.log("DOMContentLoaded");
        showMemInfo();
      });
    </script>
  </head>
  <body>
    <button onclick="addMem()">添加内存</button>
    <button onclick="mem.length = 0">清空内存</button>
    <button onclick="mem.length = 0;window.location.reload()">
      清空内存并刷新
    </button>
    <button onclick="window.location.reload()">刷新</button>
    <div id="mem"></div>
  </body>
</html>
