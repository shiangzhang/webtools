<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>QQ浏览器Crash验证</title>
        <style type='text/css'>
            body{
                padding:50px;
                font-size:16pt;
            }
        </style>
        <script type="text/javascript" src="./js/jquery-3.3.1.min.js"></script>
        <script type="text/javascript">
            function setTimeoutSpan(){
                var timeoutRt = setTimeout(setTimeoutSpan,50);
                document.getElementById("timeoutspan").innerText = timeoutRt;
            }
            function setTimeoutSpan2(){
                var timeoutRt = setTimeout(setTimeoutSpan2,50);
                document.getElementById("timeoutspan2").innerText = timeoutRt;
            }
            function setTimeoutSpan3(){
                var timeoutRt = setTimeout(setTimeoutSpan3,50);
                document.getElementById("timeoutspan3").innerText = timeoutRt;
            }
            function setTimeoutSpan4(){
                var timeoutRt = setTimeout(setTimeoutSpan4,50);
                document.getElementById("timeoutspan4").innerText = timeoutRt;
            }
            function setTimeoutSpan5(){
                var timeoutRt = setTimeout(setTimeoutSpan5,50);
                document.getElementById("timeoutspan5").innerText = timeoutRt;
            }

            setTimeout(setTimeoutSpan,500);
            setTimeout(setTimeoutSpan2,500);
            setTimeout(setTimeoutSpan3,500);
            setTimeout(setTimeoutSpan4,500);
            setTimeout(setTimeoutSpan5,500);
            var ws;
            function sendMessage(){
                ws.send("client time:" + new Date().getTime());
                setTimeout(sendMessage,10);
            }
            function conn(){
                ws = new WebSocket("ws://localhost:8181");
                ws.onopen = function(e){
                    console.log('Connection to server opened');
                    sendMessage();
                }
                ws.onmessage = function(message){
                    $("#wstext").text(message.data);
                }
            }

            $(document).ready(conn);
        </script>
    </head>
    <body>
        <span id="timeoutspan">0</span>
        <br/>
        <span id="timeoutspan2">0</span>
        <br/>
        <span id="timeoutspan3">0</span>
        <br/>
        <span id="timeoutspan4">0</span>
        <br/>
        <span id="timeoutspan5">0</span>
        <br/>
        <span id="wstext">0</span>
    </body>
</html>